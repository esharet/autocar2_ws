<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from dorothy.xacro                  | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="dorothy">
  <material name="Body_Gray">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <link name="body_link">
    <visual>
      <geometry>
        <box size="1 0.25 0.03"/>
      </geometry>
      <material name="Body_Gray"/>
    </visual>
    <collision>
      <geometry>
        <box size=" 1 0.25 0.03"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.0026416666666666667" ixy="0" ixz="0" iyy="0.04170416666666666" iyz="0" izz="0.04170416666666666"/>
    </inertial>
  </link>
  <gazebo reference="body_link">
    <material value="Gazebo/Wood"/>
    <sensor name="imu_sensor" type="imu">
      <!-- <pose>0 0 0 3.141593 0 0</pose> -->
      <always_on>1</always_on>
      <gravity>true</gravity>
      <update_rate>1000.0</update_rate>
    </sensor>
  </gazebo>
  <material name="blue">
    <color rgba="0 0 .7 1"/>
  </material>
  <material name="red">
    <color rgba="0.7 0 0 1"/>
  </material>
  <link name="pod">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <box size="0.4 0.2 0.1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.4 0.2 0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="laser">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <cylinder length="0.0315" radius="0.055"/>
      </geometry>
      <material name="red"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.015 0 -0.0065"/>
      <geometry>
        <cylinder length="0.0315" radius="0.055"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.114"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <!--_LIDAR -->
  <gazebo reference="laser">
    <material>Gazebo/FlatBlack</material>
    <sensor name="lidar_sensor" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <visualize>false</visualize>
      <update_rate>15</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>360</samples>
            <resolution>1</resolution>
            <min_angle>0.0</min_angle>
            <max_angle>6.28319</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.120</min>
          <max>10.0</max>
          <resolution>0.050</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_ray_sensor.so" name="scan">
        <ros>
          <remapping>~/out:=scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>laser</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="scan_joint" type="fixed">
    <parent link="pod"/>
    <child link="laser"/>
    <origin rpy="0 0 3.14" xyz="0 0 0.15"/>
  </joint>
  <link name="camera_front">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <box size="0.01 0.04 0.04"/>
      </geometry>
      <material name="red"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.01 0.04 0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.01"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>
  <gazebo reference="camera_front">
    <material>Gazebo/Red</material>
    <sensor name="camera_front_sensor" type="camera">
      <!-- <pose>-3 -1 1.4 0 0.37 0</pose> -->
      <camera>
        <horizontal_fov>1.5</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>1000</far>
        </clip>
      </camera>
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>false</visualize>
      <!-- <format>L8</format> -->
      <camera name="camera_front">
        <distortion>
          <k1>0.0</k1>
          <k2>0.0</k2>
          <k3>0.0</k3>
          <p1>0.0</p1>
          <p2>0.0</p2>
          <center> 0.5 0.5 </center>
        </distortion>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <ros>
          <namespace/>
        </ros>
        <hack_baseline>0.07</hack_baseline>
        <frame_name>camera_front</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="cam_joint_front" type="fixed">
    <parent link="pod"/>
    <child link="camera_front"/>
    <origin rpy="0 0 0" xyz="0.3 0.0 0.0"/>
  </joint>
  <link name="camera_right">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <box size="0.01 0.04 0.04"/>
      </geometry>
      <material name="red"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.01 0.04 0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.01"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>
  <gazebo reference="camera_right">
    <material>Gazebo/Red</material>
    <sensor name="camera_right_sensor" type="camera">
      <!-- <pose>-3 -1 1.4 0 0.37 0</pose> -->
      <camera>
        <horizontal_fov>1.5</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>1000</far>
        </clip>
      </camera>
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>false</visualize>
      <!-- <format>L8</format> -->
      <camera name="camera_right">
        <distortion>
          <k1>0.0</k1>
          <k2>0.0</k2>
          <k3>0.0</k3>
          <p1>0.0</p1>
          <p2>0.0</p2>
          <center> 0.5 0.5 </center>
        </distortion>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <ros>
          <namespace/>
        </ros>
        <hack_baseline>0.07</hack_baseline>
        <frame_name>camera_right</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="cam_joint_right" type="fixed">
    <parent link="pod"/>
    <child link="camera_right"/>
    <origin rpy="0 0 -0.6283179999999999" xyz="-0.1 -0.12 0.05"/>
  </joint>
  <link name="camera_left">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <box size="0.01 0.04 0.04"/>
      </geometry>
      <material name="red"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.01 0.04 0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.01"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>
  <gazebo reference="camera_left">
    <material>Gazebo/Red</material>
    <sensor name="camera_left_sensor" type="camera">
      <!-- <pose>-3 -1 1.4 0 0.37 0</pose> -->
      <camera>
        <horizontal_fov>1.5</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>1000</far>
        </clip>
      </camera>
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>false</visualize>
      <!-- <format>L8</format> -->
      <camera name="camera_left">
        <distortion>
          <k1>0.0</k1>
          <k2>0.0</k2>
          <k3>0.0</k3>
          <p1>0.0</p1>
          <p2>0.0</p2>
          <center> 0.5 0.5 </center>
        </distortion>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <ros>
          <namespace/>
        </ros>
        <hack_baseline>0.07</hack_baseline>
        <frame_name>camera_left</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="cam_joint_left" type="fixed">
    <parent link="pod"/>
    <child link="camera_left"/>
    <origin rpy="0 0 0.6283179999999999" xyz="-0.1 0.12 0.05"/>
  </joint>
  <link name="camera_rear">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <box size="0.01 0.04 0.04"/>
      </geometry>
      <material name="red"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.01 0.04 0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.01"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>
  <gazebo reference="camera_rear">
    <material>Gazebo/Red</material>
    <sensor name="camera_rear_sensor" type="camera">
      <!-- <pose>-3 -1 1.4 0 0.37 0</pose> -->
      <camera>
        <horizontal_fov>1.5</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>1000</far>
        </clip>
      </camera>
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>false</visualize>
      <!-- <format>L8</format> -->
      <camera name="camera_rear">
        <distortion>
          <k1>0.0</k1>
          <k2>0.0</k2>
          <k3>0.0</k3>
          <p1>0.0</p1>
          <p2>0.0</p2>
          <center> 0.5 0.5 </center>
        </distortion>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <ros>
          <namespace/>
        </ros>
        <hack_baseline>0.07</hack_baseline>
        <frame_name>camera_rear</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="cam_joint_rear" type="fixed">
    <parent link="pod"/>
    <child link="camera_rear"/>
    <origin rpy="0 0 3.14159" xyz="-0.3 0.0 0.0"/>
  </joint>
  <!-- Ros materials -->
  <material name="Wheel_Black">
    <color rgba="0.1 0.1 0.1 1"/>
  </material>
  <material name="Wheel_Silver">
    <color rgba="0.7 0.7 0.7 1"/>
  </material>
  <material name="Mechanical">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <link name="base_link">
    </link>
  <joint name="body_joint" type="fixed">
    <parent link="base_link"/>
    <child link="body_link"/>
  </joint>
  <joint name="pod_joint" type="fixed">
    <parent link="body_link"/>
    <child link="pod"/>
    <origin rpy="0 0 3.14" xyz="0 0 0.065"/>
  </joint>
  <link name="base_footprint">
    </link>
  <joint name="footprint_joint" type="fixed">
    <child link="base_link"/>
    <parent link="base_footprint"/>
  </joint>
  <!-- Wheel link -->
  <link name="left_front_wheel_link">
    <visual>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
        <!-- <box size="${r} ${r} ${1.1*w}" /> -->
      </geometry>
      <material name="Wheel_Black"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.00033333333333333343" ixy="0" ixz="0" iyy="0.00033333333333333343" iyz="0" izz="0.0005000000000000001"/>
    </inertial>
  </link>
  <gazebo reference="left_front_wheel_link">
    <material value="Gazebo/Black"/>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <slip1>100.0</slip1>
    <fdir1>0.0 0.0 1.0</fdir1>
    <!-- <kp>5000.0</kp>
            <kd>1.0</kd> -->
  </gazebo>
  <!-- Hub link is the non rotating part which the bearing gos on -->
  <!-- The bearing is modeled as continuous joint -->
  <!-- The join is used to control the velocity of the vehicle -->
  <link name="left_front_hub_link">
    <visual>
      <geometry>
        <cylinder length="0.11000000000000001" radius="0.05"/>
      </geometry>
      <material name="Wheel_Silver"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="left_front_hub_link">
    <material value="Gazebo/Bricks"/>
  </gazebo>
  <joint name="left_front_hub_to_wheel" type="continuous">
    <axis xyz="0 0 1"/>
    <parent link="left_front_hub_link"/>
    <child link="left_front_wheel_link"/>
    <dynamics damping="0.001" friction="0.0001"/>
  </joint>
  <!-- This is the lower part of a car strut. 
        It is rigidly connected to the hub and fixes the camber angle -->
  <link name="left_front_strut_link">
    <visual>
      <geometry>
        <cylinder length="0.2" radius="0.01"/>
      </geometry>
      <material name="Mechanical"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="left_front_strut_link">
    <material value="Gazebo/GreyTransparent "/>
  </gazebo>
  <joint name="left_front_strut_to_hub" type="fixed">
    <parent link="left_front_strut_dummy_link"/>
    <child link="left_front_hub_link"/>
    <origin rpy="0 1.570795 0 "/>
  </joint>
  <link name="left_front_strut_dummy_link">
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <joint name="left_front_strut_to_strut_dummy" type="revolute">
    <limit effort="100" lower="-1.0471966666666666" upper="1.0471966666666666" velocity="1"/>
    <parent link="left_front_strut_link"/>
    <child link="left_front_strut_dummy_link"/>
    <axis xyz="0 0 -1"/>
    <origin rpy="0 0 0"/>
    <dynamics damping="0.0" friction="0"/>
  </joint>
  <gazebo reference="left_front_strut_to_strut_dummy">
    <empty/>
  </gazebo>
  <!-- Next we create the slider -->
  <link name="left_front_strut_base_link">
    <visual>
      <geometry>
        <cylinder length="0.01" radius="0.06999999999999999"/>
      </geometry>
      <material name="Mechanical"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="left_front_strut_base_link">
    <material value="Gazebo/GreyTransparent "/>
  </gazebo>
  <joint name="left_front_strut_base_to_strut" type="prismatic">
    <limit effort="1" lower="-0.05" upper="+0.05" velocity="1"/>
    <parent link="left_front_strut_base_link"/>
    <child link="left_front_strut_link"/>
    <axis xyz="0 0 1"/>
    <origin rpy="0.0 -0.05235983333333333 0"/>
    <dynamics damping="5" friction="0.0"/>
  </joint>
  <gazebo reference="left_front_strut_base_to_strut">
    <springStiffness>100</springStiffness>
    <implicitSpringDamper>true</implicitSpringDamper>
    <springReference>-0.07</springReference>
  </gazebo>
  <!-- The pose of one wheel subsystem with relation to the body -->
  <joint name="left_front_wheel_base_to_strut" type="fixed">
    <parent link="body_link"/>
    <child link="left_front_strut_base_link"/>
    <origin rpy="0 0 1.570795" xyz="0.3 0.3 0"/>
  </joint>
  <!-- Wheel link -->
  <link name="right_front_wheel_link">
    <visual>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
        <!-- <box size="${r} ${r} ${1.1*w}" /> -->
      </geometry>
      <material name="Wheel_Black"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.00033333333333333343" ixy="0" ixz="0" iyy="0.00033333333333333343" iyz="0" izz="0.0005000000000000001"/>
    </inertial>
  </link>
  <gazebo reference="right_front_wheel_link">
    <material value="Gazebo/Black"/>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <slip1>100.0</slip1>
    <fdir1>0.0 0.0 1.0</fdir1>
    <!-- <kp>5000.0</kp>
            <kd>1.0</kd> -->
  </gazebo>
  <!-- Hub link is the non rotating part which the bearing gos on -->
  <!-- The bearing is modeled as continuous joint -->
  <!-- The join is used to control the velocity of the vehicle -->
  <link name="right_front_hub_link">
    <visual>
      <geometry>
        <cylinder length="0.11000000000000001" radius="0.05"/>
      </geometry>
      <material name="Wheel_Silver"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="right_front_hub_link">
    <material value="Gazebo/Bricks"/>
  </gazebo>
  <joint name="right_front_hub_to_wheel" type="continuous">
    <axis xyz="0 0 1"/>
    <parent link="right_front_hub_link"/>
    <child link="right_front_wheel_link"/>
    <dynamics damping="0.001" friction="0.0001"/>
  </joint>
  <!-- This is the lower part of a car strut. 
        It is rigidly connected to the hub and fixes the camber angle -->
  <link name="right_front_strut_link">
    <visual>
      <geometry>
        <cylinder length="0.2" radius="0.01"/>
      </geometry>
      <material name="Mechanical"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="right_front_strut_link">
    <material value="Gazebo/GreyTransparent "/>
  </gazebo>
  <joint name="right_front_strut_to_hub" type="fixed">
    <parent link="right_front_strut_dummy_link"/>
    <child link="right_front_hub_link"/>
    <origin rpy="0 1.570795 0 "/>
  </joint>
  <link name="right_front_strut_dummy_link">
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <joint name="right_front_strut_to_strut_dummy" type="revolute">
    <limit effort="100" lower="-1.0471966666666666" upper="1.0471966666666666" velocity="1"/>
    <parent link="right_front_strut_link"/>
    <child link="right_front_strut_dummy_link"/>
    <axis xyz="0 0 -1"/>
    <origin rpy="0 0 0"/>
    <dynamics damping="0.0" friction="0"/>
  </joint>
  <gazebo reference="right_front_strut_to_strut_dummy">
    <empty/>
  </gazebo>
  <!-- Next we create the slider -->
  <link name="right_front_strut_base_link">
    <visual>
      <geometry>
        <cylinder length="0.01" radius="0.06999999999999999"/>
      </geometry>
      <material name="Mechanical"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="right_front_strut_base_link">
    <material value="Gazebo/GreyTransparent "/>
  </gazebo>
  <joint name="right_front_strut_base_to_strut" type="prismatic">
    <limit effort="1" lower="-0.05" upper="+0.05" velocity="1"/>
    <parent link="right_front_strut_base_link"/>
    <child link="right_front_strut_link"/>
    <axis xyz="0 0 1"/>
    <origin rpy="0.0 0.05235983333333333 0"/>
    <dynamics damping="5" friction="0.0"/>
  </joint>
  <gazebo reference="right_front_strut_base_to_strut">
    <springStiffness>100</springStiffness>
    <implicitSpringDamper>true</implicitSpringDamper>
    <springReference>-0.07</springReference>
  </gazebo>
  <!-- The pose of one wheel subsystem with relation to the body -->
  <joint name="right_front_wheel_base_to_strut" type="fixed">
    <parent link="body_link"/>
    <child link="right_front_strut_base_link"/>
    <origin rpy="0 0 1.570795" xyz="0.3 -0.3 0"/>
  </joint>
  <!-- Wheel link -->
  <link name="left_back_wheel_link">
    <visual>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
        <!-- <box size="${r} ${r} ${1.1*w}" /> -->
      </geometry>
      <material name="Wheel_Black"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.00033333333333333343" ixy="0" ixz="0" iyy="0.00033333333333333343" iyz="0" izz="0.0005000000000000001"/>
    </inertial>
  </link>
  <gazebo reference="left_back_wheel_link">
    <material value="Gazebo/Black"/>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <slip1>100.0</slip1>
    <fdir1>0.0 0.0 1.0</fdir1>
    <!-- <kp>5000.0</kp>
            <kd>1.0</kd> -->
  </gazebo>
  <!-- Hub link is the non rotating part which the bearing gos on -->
  <!-- The bearing is modeled as continuous joint -->
  <!-- The join is used to control the velocity of the vehicle -->
  <link name="left_back_hub_link">
    <visual>
      <geometry>
        <cylinder length="0.11000000000000001" radius="0.05"/>
      </geometry>
      <material name="Wheel_Silver"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="left_back_hub_link">
    <material value="Gazebo/Bricks"/>
  </gazebo>
  <joint name="left_back_hub_to_wheel" type="continuous">
    <axis xyz="0 0 1"/>
    <parent link="left_back_hub_link"/>
    <child link="left_back_wheel_link"/>
    <dynamics damping="0.001" friction="0.0001"/>
  </joint>
  <!-- This is the lower part of a car strut. 
        It is rigidly connected to the hub and fixes the camber angle -->
  <link name="left_back_strut_link">
    <visual>
      <geometry>
        <cylinder length="0.2" radius="0.01"/>
      </geometry>
      <material name="Mechanical"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="left_back_strut_link">
    <material value="Gazebo/GreyTransparent "/>
  </gazebo>
  <joint name="left_back_strut_to_hub" type="fixed">
    <parent link="left_back_strut_dummy_link"/>
    <child link="left_back_hub_link"/>
    <origin rpy="0 1.570795 0 "/>
  </joint>
  <link name="left_back_strut_dummy_link">
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <joint name="left_back_strut_to_strut_dummy" type="fixed">
    <parent link="left_back_strut_link"/>
    <child link="left_back_strut_dummy_link"/>
  </joint>
  <gazebo reference="left_back_strut_to_strut_dummy">
    <empty/>
  </gazebo>
  <!-- Next we create the slider -->
  <link name="left_back_strut_base_link">
    <visual>
      <geometry>
        <cylinder length="0.01" radius="0.06999999999999999"/>
      </geometry>
      <material name="Mechanical"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="left_back_strut_base_link">
    <material value="Gazebo/GreyTransparent "/>
  </gazebo>
  <joint name="left_back_strut_base_to_strut" type="prismatic">
    <limit effort="1" lower="-0.05" upper="+0.05" velocity="1"/>
    <parent link="left_back_strut_base_link"/>
    <child link="left_back_strut_link"/>
    <axis xyz="0 0 1"/>
    <origin rpy="0.0 -0.05235983333333333 -0.04363319444444445"/>
    <dynamics damping="5" friction="0.0"/>
  </joint>
  <gazebo reference="left_back_strut_base_to_strut">
    <springStiffness>100</springStiffness>
    <implicitSpringDamper>true</implicitSpringDamper>
    <springReference>-0.07</springReference>
  </gazebo>
  <!-- The pose of one wheel subsystem with relation to the body -->
  <joint name="left_back_wheel_base_to_strut" type="fixed">
    <parent link="body_link"/>
    <child link="left_back_strut_base_link"/>
    <origin rpy="0 0 1.570795" xyz="-0.4 0.3 0"/>
  </joint>
  <!-- Wheel link -->
  <link name="right_back_wheel_link">
    <visual>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
        <!-- <box size="${r} ${r} ${1.1*w}" /> -->
      </geometry>
      <material name="Wheel_Black"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.00033333333333333343" ixy="0" ixz="0" iyy="0.00033333333333333343" iyz="0" izz="0.0005000000000000001"/>
    </inertial>
  </link>
  <gazebo reference="right_back_wheel_link">
    <material value="Gazebo/Black"/>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <slip1>100.0</slip1>
    <fdir1>0.0 0.0 1.0</fdir1>
    <!-- <kp>5000.0</kp>
            <kd>1.0</kd> -->
  </gazebo>
  <!-- Hub link is the non rotating part which the bearing gos on -->
  <!-- The bearing is modeled as continuous joint -->
  <!-- The join is used to control the velocity of the vehicle -->
  <link name="right_back_hub_link">
    <visual>
      <geometry>
        <cylinder length="0.11000000000000001" radius="0.05"/>
      </geometry>
      <material name="Wheel_Silver"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="right_back_hub_link">
    <material value="Gazebo/Bricks"/>
  </gazebo>
  <joint name="right_back_hub_to_wheel" type="continuous">
    <axis xyz="0 0 1"/>
    <parent link="right_back_hub_link"/>
    <child link="right_back_wheel_link"/>
    <dynamics damping="0.001" friction="0.0001"/>
  </joint>
  <!-- This is the lower part of a car strut. 
        It is rigidly connected to the hub and fixes the camber angle -->
  <link name="right_back_strut_link">
    <visual>
      <geometry>
        <cylinder length="0.2" radius="0.01"/>
      </geometry>
      <material name="Mechanical"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="right_back_strut_link">
    <material value="Gazebo/GreyTransparent "/>
  </gazebo>
  <joint name="right_back_strut_to_hub" type="fixed">
    <parent link="right_back_strut_dummy_link"/>
    <child link="right_back_hub_link"/>
    <origin rpy="0 1.570795 0 "/>
  </joint>
  <link name="right_back_strut_dummy_link">
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <joint name="right_back_strut_to_strut_dummy" type="fixed">
    <parent link="right_back_strut_link"/>
    <child link="right_back_strut_dummy_link"/>
  </joint>
  <gazebo reference="right_back_strut_to_strut_dummy">
    <empty/>
  </gazebo>
  <!-- Next we create the slider -->
  <link name="right_back_strut_base_link">
    <visual>
      <geometry>
        <cylinder length="0.01" radius="0.06999999999999999"/>
      </geometry>
      <material name="Mechanical"/>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="3.333333333333334e-05" ixy="0" ixz="0" iyy="3.333333333333334e-05" iyz="0" izz="5e-05"/>
    </inertial>
  </link>
  <gazebo reference="right_back_strut_base_link">
    <material value="Gazebo/GreyTransparent "/>
  </gazebo>
  <joint name="right_back_strut_base_to_strut" type="prismatic">
    <limit effort="1" lower="-0.05" upper="+0.05" velocity="1"/>
    <parent link="right_back_strut_base_link"/>
    <child link="right_back_strut_link"/>
    <axis xyz="0 0 1"/>
    <origin rpy="0.0 0.05235983333333333 0.04363319444444445"/>
    <dynamics damping="5" friction="0.0"/>
  </joint>
  <gazebo reference="right_back_strut_base_to_strut">
    <springStiffness>100</springStiffness>
    <implicitSpringDamper>true</implicitSpringDamper>
    <springReference>-0.07</springReference>
  </gazebo>
  <!-- The pose of one wheel subsystem with relation to the body -->
  <joint name="right_back_wheel_base_to_strut" type="fixed">
    <parent link="body_link"/>
    <child link="right_back_strut_base_link"/>
    <origin rpy="0 0 1.570795" xyz="-0.4 -0.3 0"/>
  </joint>
  <gazebo>
    <!-- <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so"></plugin> -->
    <!-- <plugin name="JointStatePublisher" filename="libJointStatePublisher.so" /> -->
    <plugin filename="libArduPilotPlugin.so" name="ArduCopter_Plugin">
      <fdm_addr>127.0.0.1</fdm_addr>
      <fdm_port_in>9002</fdm_port_in>
      <fdm_port_out>9003</fdm_port_out>
      <modelXYZToAirplaneXForwardZDown>0 0 0 3.14159 0 0</modelXYZToAirplaneXForwardZDown>
      <gazeboXYZToNED>0 0 0 3.14159 0 0</gazeboXYZToNED>
      <imuName>imu_sensor</imuName>
      <connectionTimeoutMaxCount>5</connectionTimeoutMaxCount>
      <control channel="2">
        <type>VELOCITY</type>
        <offset>-0.5</offset>
        <p_gain>10</p_gain>
        <!-- <cmd_max>1000</cmd_max>
                    <cmd_min>-1000</cmd_min> -->
        <jointName>left_back_hub_to_wheel</jointName>
        <multiplier>150</multiplier>
      </control>
      <control channel="2">
        <type>VELOCITY</type>
        <offset>-0.5</offset>
        <p_gain>10</p_gain>
        <!-- <cmd_max>1000</cmd_max>
                    <cmd_min>-1000</cmd_min> -->
        <jointName>left_front_hub_to_wheel</jointName>
        <multiplier>150</multiplier>
      </control>
      <control channel="2">
        <type>VELOCITY</type>
        <offset>-0.5</offset>
        <p_gain>10</p_gain>
        <!-- <cmd_max>1000</cmd_max>
                    <cmd_min>-1000</cmd_min> -->
        <jointName>right_back_hub_to_wheel</jointName>
        <multiplier>150</multiplier>
      </control>
      <control channel="2">
        <type>VELOCITY</type>
        <offset>-0.5</offset>
        <p_gain>10</p_gain>
        <!-- <cmd_max>1000</cmd_max>
                    <cmd_min>-1000</cmd_min> -->
        <jointName>right_front_hub_to_wheel</jointName>
        <multiplier>150</multiplier>
      </control>
      <control channel="0">
        <type>POSITION</type>
        <offset>-0.5</offset>
        <p_gain>30</p_gain>
        <cmd_max>100</cmd_max>
        <cmd_min>-100</cmd_min>
        <jointName>left_front_strut_to_strut_dummy</jointName>
        <multiplier>1.570795</multiplier>
      </control>
      <control channel="0">
        <type>POSITION</type>
        <offset>-0.5</offset>
        <p_gain>30</p_gain>
        <cmd_max>100</cmd_max>
        <cmd_min>-100</cmd_min>
        <jointName>right_front_strut_to_strut_dummy</jointName>
        <multiplier>1.570795</multiplier>
      </control>
    </plugin>
  </gazebo>
</robot>
